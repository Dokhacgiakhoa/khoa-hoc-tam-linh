/* =========================================================
   MEGA DROPDOWN (Khoa h·ªçc T√¢m Linh)
   File: src/components/layout/navbar/mega-dropdown.css
   M·ª•c ti√™u:
   - Gi·ªØ b·ªë c·ª•c 3 c·ªôt nh∆∞ ban ƒë·∫ßu (2 c·ªôt link + 1 c·ªôt ·∫£nh)
   - Hi·ªáu ·ª©ng m·ªü/ƒë√≥ng m∆∞·ª£t, c√≥ stagger nh·∫π cho n·ªôi dung
   - Kh√¥ng n·ªÅn/vi·ªÅn sau ·∫£nh, ·∫£nh kh√¥ng ph√° v·ª° l∆∞·ªõi
   - Responsive: ‚â•1024px (3 c·ªôt) ‚Ä¢ ‚â§1024px (2 c·ªôt) ‚Ä¢ ‚â§720px (1 c·ªôt)
   - T√¥n tr·ªçng prefers-reduced-motion
   ========================================================= */

/* ---------- Bi·∫øn th·ªùi l∆∞·ª£ng ƒë·ªÉ tinh ch·ªânh nhanh ---------- */
:root {
  --mega-t-height: 0.65s; /* m·ªü/ƒë√≥ng chi·ªÅu cao */
  --mega-t-move: 0.6s; /* tr∆∞·ª£t d·ªçc (Y) */
  --mega-t-fade: 0.55s; /* m·ªù d·∫ßn/hi·ªán d·∫ßn */
}

/* ---------- V·ªè mega: ·∫©n m·∫∑c ƒë·ªãnh, b√°m theo .kh-nav (ƒë√£ relative) ---------- */
.kh-mega {
  position: absolute;
  left: 50%;
  top: calc(100% + 10px);

  /* b·∫Øt ƒë·∫ßu cao h∆°n 1 ch√∫t ƒë·ªÉ t·∫°o c·∫£m gi√°c tr∆∞·ª£t xu·ªëng */
  transform: translate(-50%, -10px);

  width: min(1100px, calc(100vw - 40px));
  background: var(--kh-bg);
  border: 1px solid var(--kh-border);
  border-radius: var(--radius);
  box-shadow: var(--elev);
  overflow: hidden;

  /* tr·∫°ng th√°i ·∫©n */
  max-height: 0;
  opacity: 0;
  pointer-events: none;

  /* hi·ªáu ·ª©ng m∆∞·ª£t ‚Äì t√°ch ri√™ng t·ª´ng thu·ªôc t√≠nh */
  transition: max-height var(--mega-t-height) cubic-bezier(0.22, 1, 0.36, 1),
    opacity var(--mega-t-fade) ease,
    transform var(--mega-t-move) cubic-bezier(0.22, 1, 0.36, 1);

  will-change: max-height, opacity, transform;
  z-index: 60;
}

/* ---------- Tr·∫°ng th√°i hi·ªÉn th·ªã ---------- */
.kh-mega.show {
  max-height: 560px; /* ƒë·ªß ch·ª©a 3 c·ªôt + footer */
  opacity: 1;
  transform: translate(-50%, 0);
  pointer-events: auto;
}

/* =========================================================
   B·ªë c·ª•c l∆∞·ªõi 3 c·ªôt ·ªïn ƒë·ªãnh
   ========================================================= */

/* V√πng ru·ªôt mega (3 c·ªôt) */
.kh-mega-inner {
  display: grid;
  grid-template-columns:
    minmax(260px, 1fr) /* C·ªôt 1: ti√™u ƒë·ªÅ + item */
    minmax(260px, 1fr) /* C·ªôt 2: item */
    minmax(340px, 420px); /* C·ªôt 3: ·∫£nh */
  gap: 16px 20px;
  padding: 20px;
  align-items: start;

  /* xu·∫•t hi·ªán m∆∞·ª£t (fade + slide) */
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 0.45s ease 0.12s,
    transform 0.45s cubic-bezier(0.22, 1, 0.36, 1) 0.12s;
}

.kh-mega.show .kh-mega-inner {
  opacity: 1;
  transform: translateY(0);
}

/* C·ªôt chung */
.kh-col {
  min-width: 0;
} /* tr√°nh overflow n·ªôi dung d√†i */

/* Ti√™u ƒë·ªÅ c·ªôt */
.kh-col-title {
  font-weight: 700;
  color: #fff;
  padding: 10px 14px 6px;
  margin: 0 0 6px;
  border-radius: 12px;
}

/* Danh s√°ch item trong c·ªôt */
.kh-col-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Link item trong mega */
.kh-mega-link {
  display: block;
  padding: 14px 16px;
  color: var(--kh-text);
  text-decoration: none;
  border-radius: 14px;
  background: var(--kh-block);
  border: 1px solid var(--kh-border);
  transition: filter 0.25s ease, transform 0.12s ease,
    background-color 0.25s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.kh-mega-link:hover,
.kh-mega-link:focus {
  filter: brightness(1.08);
  transform: translateY(-1px);
  outline: none;
}

/* ============================
   üñºÔ∏è C·ªôt ·∫£nh minh h·ªça trong mega menu
   ============================ */
.kh-col-image {
  display: flex;
  align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
  justify-content: center; /* CƒÉn gi·ªØa theo chi·ªÅu ngang */
  height: 100%; /* Chi·ªÅu cao b·∫±ng c·ªôt b√™n c·∫°nh */
  min-height: 100%;
  padding: 12px 0; /* Kho·∫£ng ƒë·ªám nh·∫π top & bottom */
  box-sizing: border-box;
  background: none; /* Kh√¥ng n·ªÅn */
}

/* ·∫¢nh minh h·ªça ‚Äì thu·∫ßn cƒÉn gi·ªØa, kh√¥ng vi·ªÅn s√°ng, kh√¥ng hover */
.kh-col-image img {
  display: block;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain; /* Gi·ªØ t·ª∑ l·ªá chu·∫©n */
  border-radius: var(--radius);
  background: none;
  box-shadow: none; /* B·ªè vi·ªÅn s√°ng */
  transition: none; /* B·ªè hi·ªáu ·ª©ng hover */
  opacity: 1;
}

/* ============================
   üß≠ FOOTER MEGA MENU CHU·∫®N H·ªÜ TH·ªêNG
   ============================ */
.kh-mega-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 16px 24px 18px;
  border-top: 1px solid var(--kh-border);
  background: rgba(255, 255, 255, 0.02); /* √°nh m·ªù nh·∫π, ƒë·ªìng b·ªô tone n·ªÅn */
  border-radius: 0 0 var(--radius) var(--radius);
  box-sizing: border-box;
}

/* Ghi ch√∫ m√¥ t·∫£ trong footer */
.kh-mega-note {
  flex: 1;
  margin: 0;
  color: var(--kh-muted);
  font-size: 0.97rem;
  line-height: 1.5;
  letter-spacing: 0.2px;
}

.kh-mega-note strong,
.kh-mega-note em {
  color: var(--kh-text);
  font-style: normal;
  font-weight: 600;
}

/* ============================
   üü° CTA ‚Äì N√∫t h√†nh ƒë·ªông trong footer
   ============================ */
.kh-mega-footer .kh-cta {
  margin-left: auto;
  white-space: nowrap; /* Kh√¥ng xu·ªëng d√≤ng */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 44px; /* Chi·ªÅu cao chu·∫©n */
  padding: 10px 28px;
  border-radius: 999px;
  background: var(--kh-gold);
  color: #0f0a1e;
  font-weight: 600;
  text-decoration: none;
  border: 2px solid transparent;
  transition: all 0.25s ease;
}

/* Hover: vi·ªÅn v√†ng, n·ªÅn trong su·ªët */
.kh-mega-footer .kh-cta:hover {
  background: transparent;
  color: var(--kh-gold);
  border-color: var(--kh-gold);
  transform: translateY(-1px);
}

/* Active: nh·∫•n xu·ªëng nh·∫π */
.kh-mega-footer .kh-cta:active {
  transform: translateY(1px);
}

/* ============================
   üì± Responsive Footer Mega
   ============================ */
@media (max-width: 768px) {
  .kh-mega-footer {
    flex-direction: column;
    align-items: stretch;
    text-align: center;
    gap: 12px;
    padding: 14px 18px;
  }

  .kh-mega-note {
    font-size: 0.95rem;
  }

  .kh-mega-footer .kh-cta {
    margin-left: 0;
    align-self: center;
    width: 100%;
    max-width: 240px;
  }
}

/* =========================================================
   Hi·ªáu ·ª©ng xu·∫•t hi·ªán t·ª´ng c·ªôt (stagger)
   ========================================================= */
.kh-mega .kh-col {
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}
.kh-mega.show .kh-col:nth-child(1) {
  transition-delay: 0.12s;
  opacity: 1;
  transform: none;
}
.kh-mega.show .kh-col:nth-child(2) {
  transition-delay: 0.18s;
  opacity: 1;
  transform: none;
}
.kh-mega.show .kh-col:nth-child(3) {
  transition-delay: 0.24s;
  opacity: 1;
  transform: none;
}

/* =========================================================
   Responsive
   ========================================================= */
@media (max-width: 1200px) {
  .kh-mega-inner {
    grid-template-columns:
      minmax(240px, 1fr)
      minmax(240px, 1fr)
      minmax(300px, 360px);
  }
  .kh-col-image,
  .kh-col-image img {
    max-width: 360px;
  }
}

@media (max-width: 1024px) {
  /* chuy·ªÉn v·ªÅ 2 c·ªôt, ·∫£nh xu·ªëng h√†ng d∆∞·ªõi */
  .kh-mega-inner {
    grid-template-columns: 1fr 1fr;
  }
  .kh-col-image {
    grid-column: 1 / -1;
    justify-self: center;
    max-width: 560px;
  }
  .kh-col-image img {
    max-width: 560px;
  }
}

@media (max-width: 720px) {
  /* 1 c·ªôt full-width */
  .kh-mega-inner {
    grid-template-columns: 1fr;
  }
  .kh-mega-footer {
    flex-direction: column;
    align-items: stretch;
  }
  .kh-col-image,
  .kh-col-image img {
    max-width: 100%;
  }
}

/* =========================================================
   Truy c·∫≠p & T·ªëi ∆∞u
   ========================================================= */

/* Gi·ªØ cu·ªôn trong mega kh√¥ng ·∫£nh h∆∞·ªüng body (nh·∫•t l√† mobile) */
.kh-mega {
  overscroll-behavior: contain;
}

/* T√¥n tr·ªçng ng∆∞·ªùi d√πng h·∫°n ch·∫ø chuy·ªÉn ƒë·ªông */
@media (prefers-reduced-motion: reduce) {
  .kh-mega,
  .kh-mega .kh-mega-inner,
  .kh-mega .kh-mega-footer,
  .kh-mega .kh-col,
  .kh-mega-link {
    transition: none !important;
    transform: none !important;
  }
}

/* ============================
   üîî Badge th√¥ng b√°o (h·ªôp th∆∞ / gi·ªè h√†ng)
   ============================ */
.kh-has-badge {
  position: relative;
}

/* Badge tr√≤n hi·ªÉn th·ªã s·ªë */
.kh-badge {
  position: absolute;
  top: 50%;
  right: 16px; /* ƒë·∫©y s√°t h∆°n v√†o vi·ªÅn ph·∫£i */
  transform: translateY(-50%); /* cƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
  background: var(--kh-gold);
  color: #0f0a1e;
  font-weight: 700;
  font-size: 12px;
  min-width: 20px;
  height: 20px;
  line-height: 20px;
  text-align: center;
  border-radius: 999px;
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
  transition: all 0.25s ease;
}

/* Badge ƒë·ªông khi c√≥ thay ƒë·ªïi s·ªë */
.kh-badge.animate {
  transform: translateY(-50%) scale(1.2);
  filter: brightness(1.08);
}
